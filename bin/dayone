#!/usr/bin/env ruby
require 'fileutils'

USAGE = <<-end
Usage:
dayone --set location <PATH>
end

def usage
  puts USAGE
  exit 1
end

# Put your code here
case ARGV[0]
when '--set'
  case ARGV[1]
  when 'location'
    # Make sure location store folder exists
    dayone_folder = File.join(ENV['HOME'], '.rb-dayone')
    FileUtils::mkdir_p dayone_folder
    
    # Put our location in it
    new_dayone_location = File.expand_path(ARGV[2])
    File.open(File.join(dayone_folder, 'location'),'w'){ |io| io.puts new_dayone_location }
    
    # Let the user know
    puts "DayOne journal now located at: #{new_dayone_location}"
  else
    usage
  end
else
  usage
end